# Cython

* [Cython for NumPy users](https://cython.readthedocs.io/en/latest/src/userguide/numpy_tutorial.html): shows an example how to progressively optimize a given function more and more.
* [Typed Memoryviews](https://cython.readthedocs.io/en/latest/src/userguide/memoryviews.html): Explains the use of memoryviews such as
    ```python
    # Memoryview on a NumPy array
    narr = np.arange(27, dtype=np.dtype("i")).reshape((3, 3, 3))
    cdef int [:, :, :] narr_view = narr
    ```
    - Can be sliced and indexed, *but based on my experience it seems that you cannot assign to a slice of a memoryview directly* (you can assign a slice *of* a memoryview to a different object though).
    - Can be declared C- or Fortran-contiguous (via `::1` notation) for even better performance.
* [Language basics](https://cython.readthedocs.io/en/latest/src/userguide/language_basics.html): Difference between `def` and `cdef` and plenty other basics. Quite long.
* [Extension types](https://cython.readthedocs.io/en/latest/src/userguide/extension_types.html): Create new Python types aka extension types, e.g., via `cdef class ...`.
* [Blog post "Fast Python loops with Cython"](http://nealhughes.net/cython1/): Nice blog post explaining the basics for scientific computation with Cython. Important point: To avoid unnecessary python interactions use,
    ```python
    from libc.math cimport exp as exp_c
    from libc.math cimport log as log_c
    # etc.
    ```
* Definitely look at the `.html` files generated by `cythonize(annotate=True)`, and remove all unnecessary python interactions for massive speed-ups.
* Important Cython directives to achieve speedups (see [this cython wiki entry](https://github.com/cython/cython/wiki/enhancements-compilerdirectives) for further options):
    ```python
    @cython.boundscheck(False)  # Deactivate bounds checking
    @cython.wraparound(False)   # Deactivate negative indexing.
    @cython.cdivision(True)     # Deactivate 0-division checks
    @cython.nonecheck(False)
    ```
